---
title: 自定义命令的概念和定义-语音服务
titleSuffix: Azure Cognitive Services
description: 本文介绍自定义命令应用程序的概念和定义。
services: cognitive-services
author: singhsaumya
manager: yetian
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 06/18/2020
ms.author: sausin
ms.openlocfilehash: 98510132b2341736664dfafa52e9567df95652be
ms.sourcegitcommit: 04fb3a2b272d4bbc43de5b4dbceda9d4c9701310
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/12/2020
ms.locfileid: "94561091"
---
# <a name="custom-commands-concepts-and-definitions"></a>自定义命令的概念和定义

本文作为自定义命令应用程序的概念和定义的参考。

## <a name="commands-configuration"></a>命令配置
命令是自定义命令应用程序的基本构建基块。 命令是完成用户定义的特定任务所需的一组配置。

### <a name="example-sentences"></a>示例句子
示例最谈话是用户可用于触发特定命令的 set 示例。 只需提供最谈话的示例，而不提供详尽的列表。 

### <a name="parameters"></a>参数
参数是命令完成任务所需的信息。 在复杂的方案中，还可以使用参数定义触发自定义操作的条件。

### <a name="completion-rules"></a>完成规则
完成规则是一系列规则，可在命令准备完成后执行（例如，在满足规则的所有条件时）。

### <a name="interaction-rules"></a>交互规则
交互规则是用于处理更具体或复杂情况的其他规则。 您可以添加其他验证或配置高级功能，如确认或单步更正。 还可以构建自己的自定义交互规则。

## <a name="parameters-configuration"></a>参数配置

参数是命令完成任务所需的信息。 在复杂的方案中，还可以使用参数定义触发自定义操作的条件。

### <a name="name"></a>名称
参数由 name 属性标识。 应始终为参数指定一个描述性名称。 可以在不同的部分（例如，当构造条件、语音响应或其他操作时）引用参数。
 
### <a name="isglobal"></a>IsGlobal
此复选框指示是否在应用程序中的所有命令之间共享此参数的作用域。 如果参数是全局的，则可能会从任何命令范围提供其值。 赋值后，可以从任何命令中引用该值。 

### <a name="required"></a>必需
此复选框指示是否需要此参数的值才能执行命令或完成。 如果将参数标记为必需，则必须将响应配置为提示用户提供一个值。

请注意，如果将 **所需的参数** 配置为具有 **默认值** ，则系统仍将显式提示输入参数的值。

### <a name="type"></a>类型
自定义命令支持以下参数类型：

* DateTime
* 地理位置
* Number
* 字符串

除 Geography 之外的所有这些参数类型都支持默认值配置，你可以在门户中进行配置。

### <a name="configuration"></a>Configuration
配置是仅为类型字符串定义的参数属性。 支持以下值：

* **无** 。
* **接受完全输入** ：启用后，参数接受任何输入查询文本。 如果用户需要具有完整查询文本的参数，则此选项很有用。 例如，地址为通信地址。
* **接受来自外部目录的预定义输入值** ：此值用于配置可采用各种值的参数。 一个示例是销售目录。 在这种情况下，目录托管在外部 web 终结点上，并且可以独立进行配置。
* **接受来自内部目录的预定义输入值** ：此值用于配置可以假定几个值的参数。 在这种情况下，必须在 Speech Studio 中配置值。


### <a name="validation"></a>验证
验证是适用于某些参数类型的构造，可让你配置对参数值的约束。 目前，自定义命令支持对以下参数类型进行验证：

* DateTime
* Number

## <a name="rules-configuration"></a>规则配置
自定义命令中的规则由一组条件定义，这些 *条件* 在满足时执行一组 *操作* 。 规则还允许配置 *执行后状态* 和预期下一轮的 *预期* 。

### <a name="types"></a>类型
自定义命令支持下列规则类别：

* **完成规则** ：必须在执行命令时执行这些规则。 将执行在此部分中配置的条件为 true 的所有规则。 
* **交互规则** ：这些规则可用于配置其他自定义验证、确认和单步更正，或用于完成任何其他自定义对话逻辑。 交互规则将在每次进行处理时进行计算，并可用于触发完成规则。

配置为规则一部分的不同操作将按照它们在创作门户中的显示顺序执行。

### <a name="conditions"></a>Conditions
条件是执行规则所必须满足的要求。 规则条件可以是以下类型：

* **参数值等于** ：配置的参数值等于特定值。
* **无参数值** ：配置的参数不应包含任何值。
* **必需参数** ：配置的参数具有值。
* **所有必需参数** ：标记为 "必需" 的所有参数都有一个值。
* **已更新的参数** ：由于处理当前输入 (查询文本或 activity) ，导致一个或多个参数值已更新。
* **确认成功** ：输入查询文本或活动是成功的确认 (是) 。
* **已拒绝确认** ：输入查询文本或活动不是成功的确认 () 。
* **需要更新上一个命令** ：如果想要捕获否定确认以及更新，则在实例中使用此条件。 在幕后，此条件配置为在对话框引擎检测到否定确认（其中意向与上一个轮流相同），并且用户已使用更新进行响应的情况下进行配置。

### <a name="actions"></a>操作
* **发送语音响应** ：将语音响应发送回客户端。
* **更新参数值** ：将 command 参数的值更新为指定值。
* **清除参数值** ：清除命令参数值。
* **调用 web 终结点** ：调用 web 终结点。
* 向 **客户端发送活动** ：将自定义活动发送到客户端。

### <a name="expectations"></a>一致
预期用于配置用于处理下一个用户输入的提示。 支持以下类型：

* **需要用户确认** ：此预期指定应用程序需要确认 ("是/否") 用于下一个用户输入。
* **需要参数 (s) 用户输入** ：此预期预期指定应用程序从用户输入中需要一个或多个命令参数。

### <a name="post-execution-state"></a>执行后状态
执行后状态是在处理当前输入 (查询文本或 activity) 之后的对话框状态。 它属于以下类型：

* **保持当前状态** ：仅保留当前状态。
* **完成命令** ： "完成" 命令，将不处理命令的其他规则。
* **执行完成规则** ：执行所有有效的完成规则。
* **等待用户输入** ：等待下一个用户输入。



## <a name="next-steps"></a>后续步骤

> [!div class="nextstepaction"]
> [请参阅 GitHub 上的示例](https://aka.ms/speech/cc-samples)
