---
title: 应用服务环境概述
description: 应用服务环境概述
author: ccompy
ms.assetid: 3d37f007-d6f2-4e47-8e26-b844e47ee919
ms.topic: article
ms.date: 11/16/2020
ms.author: ccompy
ms.custom: seodec18
ms.openlocfilehash: fbc498fcd654d16936c2548528e2600be68a2ad9
ms.sourcegitcommit: 8e7316bd4c4991de62ea485adca30065e5b86c67
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/17/2020
ms.locfileid: "94663503"
---
# <a name="app-service-environment-overview"></a>应用服务环境概述 

> [!NOTE]
> 本文介绍应用服务环境 v3 (预览版) 
> 

Azure 应用服务环境是一项 Azure 应用服务功能，可提供完全隔离和专用的环境，以便高度安全地运行应用服务应用。 此功能可以托管：

- Windows Web 应用
- Linux Web 应用
- Docker 容器
- 函数

应用服务环境 (ASE) 适用于有以下要求的应用程序工作负荷：

- 大规模。
- 隔离和安全网络访问。
- 高内存利用率。
- 每秒高请求 (RPS) 。 可以在单个 Azure 区域或多个 Azure 区域创建多个 Ase。 这种灵活性使得 Ase 非常适合用于水平缩放无状态应用程序，而不需要满足高 RPS 要求。

ASE 仅从一个客户处托管应用程序，并在其中一个 Vnet 中执行此操作。 客户可以对入站和出站应用程序网络流量进行精细控制。 应用程序可以通过 VPN 建立到本地公司资源的高速安全连接。

ASEv3 附带有自己的定价层（独立版）。
应用服务环境 v3 提供围绕网络子网中的应用保护，并提供您自己的 Azure App Service 专用部署。
可使用多个 ASE 进行水平缩放。 在 ASE 中运行的应用的访问权限可能受到 Web 应用程序防火墙 (WAF) 等上游设备的管制。 有关详细信息，请参阅 Web 应用程序防火墙 (WAF)。

## <a name="usage-scenarios"></a>使用方案

应用服务环境有许多用例，包括：

- 内部业务线应用程序
- 需要超过30个 ASP 实例的应用程序
- 单租户系统满足内部符合性或安全性要求
- 网络隔离的应用程序托管
- 多层应用程序

多租户应用服务中的应用可以使用多个网络功能来访问网络隔离的资源，或使其自身成为网络隔离资源。 这些功能在应用程序级别启用。  使用 ASE 时，应用上没有其他配置，因此它们位于 VNet 中。 应用部署到已在 VNet 中的网络隔离环境。 在 ASE 托管网络隔离的应用程序的基础上，它也是单租户系统。 没有其他客户使用 ASE。 如果确实需要完整的隔离情景，还可以将 ASE 部署到专用硬件上。 在网络隔离的应用程序托管、单个租赁和功能之间 

## <a name="dedicated-environment"></a>专用环境
ASE 专用于单个订阅，可托管200应用服务计划实例。 其范围可涵盖单个应用服务计划中的 100 个实例，也可以是 100 个单实例应用服务计划，或者两者之间的任何实例。

ASE 由前端和辅助角色组成。 前端负责处理 HTTP/HTTPS 终止以及 ASE 中应用请求的自动负载均衡。 前端作为应用服务计划自动添加在 ASE 中，并且可以扩展。

辅助角色是托管客户应用的角色。 辅助角色有 3 种固定大小：

- 两个 vCPU/8 GB RAM
- 四个 vCPU/16 GB RAM
- 8个 vCPU/32 GB RAM

客户无需管理前端和辅助角色。 所有基础结构都是自动的。 在 ASE 中创建或缩放应用服务计划时，将在适当的情况下添加或删除所需的基础结构。

独立 V2 应用服务计划实例会收取费用。 如果 ASE 中根本没有应用服务计划，则需要支付一个应用服务计划，其中包含两个核心辅助角色的一个实例。

## <a name="virtual-network-support"></a>虚拟网络支持
ASE 功能直接将 Azure 应用服务部署到客户的 Azure 资源管理器虚拟网络。 ASE 始终存在于虚拟网络的子网中。 可使用虚拟网络的安全功能为应用控制入站和出站网络通信。

网络安全组将入站网络通信限制为 ASE 所在的子网。 可以在上游设备和服务（例如 WAF 和网络 SaaS 提供程序）后使用 NSG 来运行应用。

应用还经常需要访问公司资源，例如内部数据库和 Web 服务。 如果在包含本地网络的 VPN 连接的虚拟网络中部署 ASE，ASE 中的应用可以访问本地资源。 无论 VPN 是站点到站点 VPN，还是 Azure ExpressRoute VPN，都可以使用此功能。

## <a name="preview"></a>预览
应用服务环境 v3 为公共预览版。  预览过程中会添加某些功能。 ASEv3 的当前限制包括：

- 无法将应用服务计划扩展到五个以上的实例
- 无法从专用注册表获取容器
- 当前不受支持的应用服务功能无法通过客户 VNet
- 没有带 internet 可访问终结点的外部部署模型
- AZ CLI 和 PowerShell (不支持命令行) 
- 没有从 ASEv2 到 ASEv3 的升级功能
- 无 FTP 支持
- 不支持通过客户 VNet 进行的某些应用服务功能。 "备份/还原"、"应用设置" 中的 "Key Vault 引用"、使用专用容器注册表以及到存储的诊断日志记录不能用于服务终结点或专用终结点
    
### <a name="asev3-preview-architecture"></a>ASEv3 预览体系结构
在 ASEv3 preview 中，ASE 将使用专用终结点来支持入站流量。 专用终结点将被 GA 替换为负载均衡器。 在预览版中，ASE 不提供对可访问 internet 的终结点的内置支持。 可以添加应用程序网关以实现此目的。 ASE 需要两个子网中的资源。  入站流量将流经专用终结点。 只要专用终结点具有可供专用终结点使用的可用地址，就可以将该终结点置于任何子网中。  出站子网必须为空，并委托给 hostingEnvironments/。 当 ASE 使用时，出站子网不能用于其他任何操作。

对于 ASEv3，ASE 子网上没有入站或出站网络要求。 您可以通过网络安全组和路由表控制流量，并且它只会影响应用程序的流量。 请勿删除与 ASE 关联的专用终结点，因为该操作不能撤消。 用于 ASE 的专用终结点用于 ASE 中的所有应用。 
